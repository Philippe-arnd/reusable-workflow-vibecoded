name: ğŸ¤– Auto-Merge PR

on:
  workflow_run:
    workflows:
      - 'âœ… PR Validation'
      - 'ğŸ”’ğŸš€ Security & Performance'
      - 'ğŸ”’ Dependency Review'
      - 'ğŸ³ Docker Validation'
    types: [completed]
    branches: [main]

jobs:
  auto-merge:
    uses: Philippe-arnd/reusable-workflow-vibecoded/.github/workflows/reusable-auto-merge.yml@main
    secrets: inherit
    with:
      base-branch: main
      merge-method: squash
      block-label: major-update
      required-checks: |
        Quick Checks
        Database & API Tests
        ğŸ” Secret Detection
        ğŸ›¡ï¸ Security Scan
        Review Dependencies for Vulnerabilities
      conditional-checks: |
        ğŸ³ Build & Validate Docker Image
